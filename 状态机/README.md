# 有限状态机

### 程序目标

* 使用有限状态机实现简易娃娃机程序。

### 需求描述

* 支持手动退币
* 支持抓取时投币
* 支持箱满时退币
* 支持抓取过程中取消
* 箱满时
  * 如不是待操作状态，只允许退币；
  * 如果是代操作状态，允许抓取，但不允许重新投币。
* 退币后，箱不满，可以继续投币。
* 每5个币可以抓取一次娃娃
* 箱子只能装100枚币

### 状态描述

主要描述娃娃机3个状态：

* 待投币     --- 初始状态
* 待操作
* 币箱满

转换过程：

|        | 待投币               | 待操作           | 币箱满                                   |
| ------ | -------------------- | ---------------- | ---------------------------------------- |
| 待投币 | 退币                 | 持续投币达到阈值 | 不到待操作阈值，但持续投币达到币箱满阈值 |
| 待操作 | 退币、币不够一次抓取 | ---              | ---                                      |
| 币箱满 | 退币                 | ---              | ---                                      |
